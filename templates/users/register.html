{% extends 'base.html' %}
{% load static %}

{% block title %}Join the Elite - ProHacker Academy{% endblock %}

{% block content %}
<div class="min-h-screen bg-black relative overflow-hidden">
  <!-- Animated Matrix Rain Background -->
  <canvas id="matrix" class="fixed inset-0 opacity-30 pointer-events-none"></canvas>

  <!-- Floating Emojis -->
  <div class="fixed inset-0 pointer-events-none">
    <span class="absolute top-20 left-10 text-8xl opacity-20 animate-bounce">Lightning</span>
    <span class="absolute top-40 right-20 text-7xl opacity-20 animate-pulse">Crossbones</span>
    <span class="absolute bottom-32 left-1/3 text-6xl opacity-10 animate-spin-slow">Gear</span>
  </div>

  <div class="relative z-10 min-h-screen flex items-center justify-center px-6 py-16">
    <div class="w-full max-w-5xl">

      <!-- Header -->
      <div class="text-center mb-12">
        <h1 class="text-5xl md:text-7xl font-black text-transparent bg-clip-text 
                   bg-gradient-to-r from-cyan-400 via-purple-500 to-pink-500 
                   drop-shadow-2xl animate-pulse">
          JOIN THE DARK SIDE
        </h1>
        <p class="mt-6 text-2xl text-cyan-300 font-handwritten">
          we have root shells and zero-days
        </p>
      </div>

      <!-- Main Card -->
      <div class="relative">
        <!-- Glow Border Effect -->
        <div class="absolute -inset-1 bg-gradient-to-r from-cyan-500 via-purple-600 to-pink-600 
                    rounded-3xl blur-xl opacity-60 group-hover:opacity-90 transition duration-1000"></div>

        <div class="relative bg-gray-900/95 backdrop-blur-2xl rounded-3xl p-10 border-4 
                    border-dashed border-cyan-500/50 shadow-2xl">
          
          <form method="post" enctype="multipart/form-data" class="space-y-8">
            {% csrf_token %}

            <div class="grid md:grid-cols-2 gap-8">

              <!-- Username -->
              <div>
                <label class="text-cyan-400 font-bold text-lg">Username <span class="text-pink-400">*</span></label>
                <input type="text" name="username" required value="{{ form.username.value|default:'' }}"
                       class="mt-2 w-full px-6 py-4 bg-black/60 border-2 border-cyan-800 rounded-2xl 
                              text-white placeholder-gray-500 focus:border-cyan-400 focus:outline-none 
                              transition text-lg">
                {% if form.username.errors %}
                  <p class="mt-2 text-pink-400 text-sm">{{ form.username.errors.0 }}</p>
                {% endif %}
              </div>

              <!-- Email -->
              <div>
                <label class="text-cyan-400 font-bold text-lg">Email <span class="text-pink-400">*</span></label>
                <input type="email" name="email" required value="{{ form.email.value|default:'' }}"
                       class="mt-2 w-full px-6 py-4 bg-black/60 border-2 border-cyan-800 rounded-2xl 
                              text-white placeholder-gray-500 focus:border-cyan-400 focus:outline-none 
                              transition text-lg">
                {% if form.email.errors %}
                  <p class="mt-2 text-pink-400 text-sm">{{ form.email.errors.0 }}</p>
                {% endif %}
              </div>

              <!-- WhatsApp -->
              <div>
                <label class="text-cyan-400 font-bold text-lg">WhatsApp <span class="text-pink-400">*</span></label>
                <div class="mt-2 relative">
                  <span class="absolute left-6 top-1/2 -translate-y-1/2 text-gray-400">+91</span>
                  <input type="tel" name="whatsapp" required value="{{ form.whatsapp.value|default:'' }}"
                         class="pl-20 w-full px-6 py-4 bg-black/60 border-2 border-cyan-800 rounded-2xl 
                                text-white focus:border-cyan-400 focus:outline-none transition text-lg"
                         maxlength="10" pattern="[0-9]{10}">
                </div>
              </div>

              <!-- Branch/Domain -->
              <div>
                <label class="text-cyan-400 font-bold text-lg">Your Domain <span class="text-pink-400">*</span></label>
                <select name="branch" required class="mt-2 w-full px-6 py-4 bg-black/60 border-2 border-cyan-800 
                        rounded-2xl text-white focus:border-cyan-400 focus:outline-none transition text-lg">
                  <option value="" disabled selected>Choose your path...</option>
                  {% for value, label in form.fields.branch.choices %}
                    <option value="{{ value }}" {% if form.branch.value == value %}selected{% endif %}>{{ label }}</option>
                  {% endfor %}
                </select>
              </div>

              <!-- GitHub -->
              <div>
                <label class="text-cyan-400 font-bold text-lg">GitHub (optional)</label>
                <div class="mt-2 flex">
                  <span class="px-4 py-4 bg-gray-800 rounded-l-2xl text-gray-400">github.com/</span>
                  <input type="text" name="github" value="{{ form.github.value|default:'' }}"
                         class="flex-1 px-4 py-4 bg-black/60 border-2 border-l-0 border-cyan-800 
                                rounded-r-2xl text-white focus:border-cyan-400 focus:outline-none">
                </div>
              </div>

              <!-- Resume Upload -->
              <div>
                <label class="text-cyan-400 font-bold text-lg">Drop Your Resume</label>
                <label class="mt-2 flex justify-center items-center w-full h-32 px-6 
                              border-4 border-dashed border-purple-600/50 rounded-3xl 
                              cursor-pointer hover:border-purple-400 transition group">
                  <div class="text-center">
                    <p class="text-5xl mb-3 group-hover:scale-110 transition">File</p>
                    <p class="text-purple-300">Click or drag PDF here (max 5MB)</p>
                  </div>
                  <input type="file" name="resume" accept=".pdf,.doc,.docx" class="hidden">
                </label>
              </div>

              <!-- Passwords (Full Width) -->
              <div class="md:col-span-2 space-y-6">
                <div>
                  <label class="text-cyan-400 font-bold text-lg">Password <span class="text-pink-400">*</span></label>
                  <input type="password" name="password1" required
                         class="mt-2 w-full px-6 py-4 bg-black/60 border-2 border-cyan-800 rounded-2xl 
                                text-white focus:border-cyan-400 focus:outline-none transition text-lg">
                </div>
                <div>
                  <label class="text-cyan-400 font-bold text-lg">Confirm Password <span class="text-pink-400">*</span></label>
                  <input type="password" name="password2" required
                         class="mt-2 w-full px-6 py-4 bg-black/60 border-2 border-cyan-800 rounded-2xl 
                                text-white focus:border-cyan-400 focus:outline-none transition text-lg">
                </div>
              </div>

              <!-- Additional Info -->
              <div class="md:col-span-2">
                <label class="text-cyan-400 font-bold text-lg">Anything Else? (CTF rank, OSCP dreams, etc.)</label>
                <textarea name="additional_info" rows="4"
                          class="mt-2 w-full px-6 py-4 bg-black/60 border-2 border-cyan-800 rounded-2xl 
                                 text-white placeholder-gray-500 focus:border-cyan-400 focus:outline-none 
                                 transition text-lg resize-none">{{ form.additional_info.value|default:'' }}</textarea>
              </div>

              <!-- Terms -->
              <div class="md:col-span-2 flex items-center">
                <input type="checkbox" name="terms" required class="w-6 h-6 text-cyan-500 
                       bg-black border-cyan-700 rounded focus:ring-cyan-500">
                <label class="ml-4 text-lg text-gray-300">
                  I accept that once I join, <span class="text-pink-400 font-bold">there's no going back</span>
                </label>
              </div>
            </div>

            <!-- Submit Button -->
            <div class="text-center mt-12">
              <button type="submit"
                      class="relative px-20 py-6 bg-gradient-to-r from-cyan-500 via-purple-600 to-pink-600 
                             rounded-full font-black text-3xl text-white shadow-2xl 
                             hover:scale-110 hover:rotate-3 transition-all duration-500 
                             border-4 border-white/30 hover:border-white">
                <span class="drop-shadow-2xl">HACK IN</span>
                <span class="absolute -inset-1 bg-white/20 blur-xl -z-10 animate-ping"></span>
              </button>
            </div>

            <div class="text-center mt-8">
              <p class="text-gray-400">
                Already compromised? 
                <a href="{% url 'login' %}" class="text-cyan-400 hover:text-cyan-300 font-bold">
                  Login here →
                </a>
              </p>
            </div>
          </form>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Matrix Rain Script -->
<script>
  const canvas = document.getElementById('matrix');
  const ctx = canvas.getContext('2d');
  canvas.width = window.innerWidth;
  canvas.height = window.innerHeight;

  const chars = "01アイウエオカキクケコサシスセソタチツテトナニヌネノハヒフヘホABCDEFGHIJKLMNOPQRSTUVWXYZ";
  const fontSize = 16;
  const columns = canvas.width / fontSize;
  const drops = Array(Math.floor(columns)).fill(1);

  function draw() {
    ctx.fillStyle = 'rgba(0,0,0,0.05)';
    ctx.fillRect(0, 0, canvas.width, canvas.height);
    ctx.fillStyle = '#00ff41';
    ctx.font = fontSize + 'px monospace';

    for (let i = 0; i < drops.length; i++) {
      const text = chars[Math.floor(Math.random() * chars.length)];
      ctx.fillText(text, i * fontSize, drops[i] * fontSize);
      if (drops[i] * fontSize > canvas.height && Math.random() > 0.975) drops[i] = 0;
      drops[i]++;
    }
  }
  setInterval(draw, 35);

  window.addEventListener('resize', () => {
    canvas.width = window.innerWidth;
    canvas.height = window.innerHeight;
  });
</script>

<style>
  @import url('https://fonts.googleapis.com/css2?family=Orbitron:wght@900&family=Comic+Neue:wght@700&display=swap');
  .font-handwritten { font-family: 'Comic Neue', cursive; font-weight: 700; }
  .animate-spin-slow { animation: spin 30s linear infinite; }
  @keyframes spin { to { transform: rotate(360deg); } }
</style>
{% endblock %}