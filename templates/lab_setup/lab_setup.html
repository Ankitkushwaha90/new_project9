{% extends 'base.html' %}
{% block title %}Cyber Security Lab Setup - ProHacker Academy{% endblock %}

{% block content %}

<!-- Hero Section -->
<section class="bg-gradient-to-br from-indigo-600 via-purple-600 to-emerald-600 dark:from-indigo-700 dark:via-purple-700 dark:to-emerald-700 text-white py-16">
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center">
    <h1 class="text-4xl md:text-5xl font-bold mb-4">
      Cyber Security Lab Setup
    </h1>
    <p class="text-xl text-indigo-100 max-w-3xl mx-auto mb-6">
      Build your own secure testing environment for ethical hacking and penetration testing
    </p>
    <div class="flex flex-col sm:flex-row gap-4 justify-center">
      <button onclick="startWizard()" class="inline-flex items-center px-8 py-3 bg-white text-indigo-600 font-bold rounded-full hover:bg-gray-100 transition">
        <i class="fas fa-magic mr-2"></i> Setup Wizard
      </button>
      <a href="#tools" class="inline-flex items-center px-8 py-3 border-2 border-white text-white font-bold rounded-full hover:bg-white hover:text-indigo-600 transition">
        <i class="fas fa-tools mr-2"></i> Tool Library
      </a>
    </div>
  </div>
</section>

<!-- Setup Wizard -->
<section id="wizard" class="max-w-4xl mx-auto px-4 py-16">
  <div class="bg-white dark:bg-gray-800 rounded-xl shadow-lg p-8 border border-gray-200 dark:border-gray-700">
    <div id="wizard-content" class="text-center">
      <div class="mb-8">
        <i class="fas fa-cogs text-6xl text-indigo-600 dark:text-cyan-400 mb-4"></i>
        <h2 class="text-3xl font-bold text-gray-900 dark:text-white mb-2">Lab Setup Wizard</h2>
        <p class="text-gray-600 dark:text-gray-400">Follow these steps to create your secure testing environment</p>
      </div>
      
      <div id="wizard-steps" class="space-y-6">
        <!-- Step 1: OS Selection -->
        <div id="step-1" class="step active">
          <h3 class="text-xl font-semibold text-indigo-600 dark:text-cyan-400 mb-4">Step 1: Choose Your Base OS</h3>
          <p class="text-gray-600 dark:text-gray-400 mb-6">What operating system will you use for your lab?</p>
          <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
            <button onclick="chooseOS('kali')" class="p-6 border-2 border-indigo-200 dark:border-indigo-700 rounded-lg hover:border-indigo-400 dark:hover:border-indigo-500 transition">
              <i class="fas fa-linux text-3xl text-indigo-600 dark:text-cyan-400 mb-3"></i>
              <h4 class="font-bold text-gray-900 dark:text-white">Kali Linux</h4>
              <p class="text-sm text-gray-600 dark:text-gray-400">Industry standard pentesting distro</p>
            </button>
            <button onclick="chooseOS('parrot')" class="p-6 border-2 border-purple-200 dark:border-purple-700 rounded-lg hover:border-purple-400 dark:hover:border-purple-500 transition">
              <i class="fas fa-parrot text-3xl text-purple-600 dark:text-purple-400 mb-3"></i>
              <h4 class="font-bold text-gray-900 dark:text-white">Parrot Security</h4>
              <p class="text-sm text-gray-600 dark:text-gray-400">Lightweight alternative to Kali</p>
            </button>
          </div>
        </div>

        <!-- Step 2: Installation Method -->
        <div id="step-2" class="step hidden">
          <h3 class="text-xl font-semibold text-emerald-600 dark:text-green-400 mb-4">Step 2: Installation Method</h3>
          <p class="text-gray-600 dark:text-gray-400 mb-6">How would you like to install your OS?</p>
          <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
            <button onclick="chooseInstall('vm')" class="p-6 border-2 border-emerald-200 dark:border-emerald-700 rounded-lg hover:border-emerald-400 dark:hover:border-emerald-500 transition">
              <i class="fas fa-desktop text-3xl text-emerald-600 dark:text-green-400 mb-3"></i>
              <h4 class="font-bold text-gray-900 dark:text-white">Virtual Machine</h4>
              <p class="text-sm text-gray-600 dark:text-gray-400">Safe & easy (VirtualBox, VMware)</p>
            </button>
            <button onclick="chooseInstall('dual-boot')" class="p-6 border-2 border-orange-200 dark:border-orange-700 rounded-lg hover:border-orange-400 dark:hover:border-orange-500 transition">
              <i class="fas fa-laptop text-3xl text-orange-600 dark:text-orange-400 mb-3"></i>
              <h4 class="font-bold text-gray-900 dark:text-white">Dual Boot</h4>
              <p class="text-sm text-gray-600 dark:text-gray-400">Full performance (native install)</p>
            </button>
          </div>
        </div>

        <!-- Step 3: VM Setup -->
        <div id="step-3" class="step hidden">
          <h3 class="text-xl font-semibold text-blue-600 dark:text-blue-400 mb-4">Step 3: VM Configuration</h3>
          <div class="bg-blue-50 dark:bg-blue-900/20 p-4 rounded-lg mb-6">
            <h4 class="font-bold text-blue-700 dark:text-blue-300 mb-2">Recommended Specs</h4>
            <ul class="text-sm space-y-1">
              <li>üñ•Ô∏è RAM: 4GB+ (8GB recommended)</li>
              <li>‚ö° CPU: 2+ cores</li>
              <li>üíæ Disk: 50GB+</li>
              <li>üåê Network: NAT + Host-Only</li>
            </ul>
          </div>
          <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
            <button onclick="chooseVM('virtualbox')" class="p-6 border-2 border-blue-200 dark:border-blue-700 rounded-lg hover:border-blue-400 dark:hover:border-blue-500 transition">
              <i class="fab fa-virtualbox text-3xl text-blue-600 dark:text-blue-400 mb-3"></i>
              <h4 class="font-bold text-gray-900 dark:text-white">VirtualBox</h4>
              <p class="text-sm text-gray-600 dark:text-gray-400">Free & open source</p>
            </button>
            <button onclick="chooseVM('vmware')" class="p-6 border-2 border-orange-200 dark:border-orange-700 rounded-lg hover:border-orange-400 dark:hover:border-orange-500 transition">
              <i class="fab fa-vmware text-3xl text-orange-600 dark:text-orange-400 mb-3"></i>
              <h4 class="font-bold text-gray-900 dark:text-white">VMware Workstation</h4>
              <p class="text-sm text-gray-600 dark:text-gray-400">Professional features</p>
            </button>
          </div>
        </div>

        <!-- Step 4: Network Setup -->
        <div id="step-4" class="step hidden">
          <h3 class="text-xl font-semibold text-green-600 dark:text-green-400 mb-4">Step 4: Network Configuration</h3>
          <div class="bg-yellow-50 dark:bg-yellow-900/20 p-4 rounded-lg mb-6">
            <h4 class="font-bold text-yellow-700 dark:text-yellow-300 mb-2">‚ö†Ô∏è Security Warning</h4>
            <p class="text-sm text-yellow-800 dark:text-yellow-200">Never use your lab network for personal browsing or banking!</p>
          </div>
          <div class="grid grid-cols-1 gap-4">
            <div class="bg-gray-50 dark:bg-gray-800 p-4 rounded-lg">
              <h5 class="font-semibold text-gray-900 dark:text-white mb-2">NAT Network</h5>
              <p class="text-sm text-gray-600 dark:text-gray-400">For internet access (VM ‚Üí Internet)</p>
              <button onclick="configureNetwork('nat')" class="mt-2 px-4 py-2 bg-green-600 text-white text-sm rounded hover:bg-green-700 transition">
                Configure NAT
              </button>
            </div>
            <div class="bg-gray-50 dark:bg-gray-800 p-4 rounded-lg">
              <h5 class="font-semibold text-gray-900 dark:text-white mb-2">Host-Only Network</h5>
              <p class="text-sm text-gray-600 dark:text-gray-400">For lab isolation (VM ‚Üî VM)</p>
              <button onclick="configureNetwork('host-only')" class="mt-2 px-4 py-2 bg-blue-600 text-white text-sm rounded hover:bg-blue-700 transition">
                Configure Host-Only
              </button>
            </div>
          </div>
        </div>

        <!-- Step 5: Tool Installation -->
        <div id="step-5" class="step hidden">
          <h3 class="text-xl font-semibold text-purple-600 dark:text-purple-400 mb-4">Step 5: Install Essential Tools</h3>
          <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-8">
            <div class="bg-gray-50 dark:bg-gray-800 p-4 rounded-lg">
              <h5 class="font-bold text-gray-900 dark:text-white mb-2">Network Scanning</h5>
              <pre class="bg-gray-100 dark:bg-gray-700 p-2 rounded text-sm font-mono"><code>sudo apt update
sudo apt install nmap</code></pre>
              <button onclick="runCommand('nmap')" class="mt-2 px-3 py-1 bg-purple-600 text-white text-xs rounded hover:bg-purple-700 transition">
                Install Nmap
              </button>
            </div>
            <div class="bg-gray-50 dark:bg-gray-800 p-4 rounded-lg">
              <h5 class="font-bold text-gray-900 dark:text-white mb-2">Web Testing</h5>
              <pre class="bg-gray-100 dark:bg-gray-700 p-2 rounded text-sm font-mono"><code>sudo apt install burpsuite</code></pre>
              <button onclick="runCommand('burp')" class="mt-2 px-3 py-1 bg-purple-600 text-white text-xs rounded hover:bg-purple-700 transition">
                Install Burp Suite
              </button>
            </div>
            <div class="bg-gray-50 dark:bg-gray-800 p-4 rounded-lg">
              <h5 class="font-bold text-gray-900 dark:text-white mb-2">Exploitation</h5>
              <pre class="bg-gray-100 dark:bg-gray-700 p-2 rounded text-sm font-mono"><code>sudo apt install metasploit-framework</code></pre>
              <button onclick="runCommand('metasploit')" class="mt-2 px-3 py-1 bg-purple-600 text-white text-xs rounded hover:bg-purple-700 transition">
                Install Metasploit
              </button>
            </div>
            <div class="bg-gray-50 dark:bg-gray-800 p-4 rounded-lg">
              <h5 class="font-bold text-gray-900 dark:text-white mb-2">Wireless</h5>
              <pre class="bg-gray-100 dark:bg-gray-700 p-2 rounded text-sm font-mono"><code>sudo apt install aircrack-ng</code></pre>
              <button onclick="runCommand('aircrack')" class="mt-2 px-3 py-1 bg-purple-600 text-white text-xs rounded hover:bg-purple-700 transition">
                Install Aircrack-ng
              </button>
            </div>
          </div>
          <div class="text-center">
            <button onclick="completeSetup()" class="px-8 py-3 bg-green-600 hover:bg-green-700 text-white font-bold rounded-lg transition">
              <i class="fas fa-check mr-2"></i> Lab Ready! Start Testing
            </button>
          </div>
        </div>

        <!-- Completion -->
        <div id="step-complete" class="step hidden text-center">
          <div class="mb-8">
            <i class="fas fa-rocket text-6xl text-green-500 mb-4"></i>
            <h3 class="text-3xl font-bold text-green-600 dark:text-green-400 mb-2">Lab Setup Complete!</h3>
            <p class="text-gray-600 dark:text-gray-400">Your cybersecurity lab is ready for action</p>
          </div>
          <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
            <div class="bg-green-50 dark:bg-green-900/20 p-4 rounded-lg">
              <h4 class="font-bold text-green-700 dark:text-green-300 mb-2">First Test</h4>
              <pre class="bg-white dark:bg-gray-800 p-2 rounded text-xs font-mono"><code>nmap -sV 192.168.56.101</code></pre>
            </div>
            <div class="bg-blue-50 dark:bg-blue-900/20 p-4 rounded-lg">
              <h4 class="font-bold text-blue-700 dark:text-blue-300 mb-2">Target VMs</h4>
              <ul class="text-sm space-y-1">
                <li>‚Ä¢ Metasploitable 2</li>
                <li>‚Ä¢ DVWA</li>
                <li>‚Ä¢ VulnHub VMs</li>
              </ul>
            </div>
            <div class="bg-purple-50 dark:bg-purple-900/20 p-4 rounded-lg">
              <h4 class="font-bold text-purple-700 dark:text-purple-300 mb-2">Next Steps</h4>
              <ul class="text-sm space-y-1">
                <li>‚Ä¢ Download target VMs</li>
                <li>‚Ä¢ Run first nmap scan</li>
                <li>‚Ä¢ Practice basic exploits</li>
              </ul>
            </div>
          </div>
          <a href="{% url 'courses:courses_list' %}" class="inline-flex items-center px-8 py-3 bg-indigo-600 hover:bg-indigo-700 text-white font-bold rounded-lg transition">
            <i class="fas fa-play mr-2"></i> Start First Course
          </a>
        </div>
      </div>
    </div>
  </div>
</section>

<!-- Tool Library -->
<section id="tools" class="py-20 px-6 bg-gray-50 dark:bg-gray-900">
  <div class="max-w-7xl mx-auto">
    <h2 class="text-3xl font-bold text-center mb-12 text-gray-900 dark:text-white">Essential Tools Library</h2>
    
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
      {% for tool in tools %}
      <div class="bg-white dark:bg-gray-800 rounded-xl shadow-md border border-gray-200 dark:border-gray-700 p-6 hover:shadow-lg transition-all duration-300">
        <div class="flex items-center mb-4">
          <i class="{{ tool.icon }} text-2xl text-indigo-600 dark:text-cyan-400 mr-3"></i>
          <h3 class="text-xl font-bold text-gray-900 dark:text-white">{{ tool.name }}</h3>
        </div>
        <p class="text-gray-600 dark:text-gray-400 mb-4">{{ tool.description }}</p>
        <div class="flex gap-2">
          <a href="{{ tool.download }}" target="_blank" class="px-4 py-2 bg-indigo-600 hover:bg-indigo-700 text-white text-sm rounded-md transition">
            Download
          </a>
          <button onclick="copyCommand('{{ tool.install }}')" class="px-4 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 text-sm rounded-md hover:bg-gray-50 dark:hover:bg-gray-700 transition">
            Copy Install
          </button>
        </div>
      </div>
      {% empty %}
      <!-- Live Terminal Demo -->
<div class="mt-16 max-w-5xl mx-auto">
  <h3 class="text-2xl font-bold text-center text-emerald-400 mb-8">
    <i class="fas fa-terminal mr-2"></i> Live Terminal Demo
  </h3>
  <p class="text-center text-gray-300 mb-8 max-w-3xl mx-auto">
    Watch real commands run in a Kali Linux terminal ‚Äî just like in your lab.
  </p>

  <!-- Terminal Container -->
  <div class="bg-black/90 backdrop-blur-xl rounded-xl shadow-2xl border border-cyan-500/30 overflow-hidden">
    <!-- Terminal Header -->
    <div class="bg-gradient-to-r from-gray-800 to-gray-900 px-4 py-3 flex items-center gap-2 border-b border-cyan-500/20">
      <div class="flex gap-2">
        <div class="w-3 h-3 rounded-full bg-red-500"></div>
        <div class="w-3 h-3 rounded-full bg-yellow-500"></div>
        <div class="w-3 h-3 rounded-full bg-green-500"></div>
      </div>
      <div class="ml-4 text-sm font-mono text-gray-300">root@kali:~#</div>
    </div>

    <!-- Terminal Body -->
    <div id="terminal" class="p-6 font-mono text-sm leading-relaxed text-green-400 overflow-hidden">
      <div class="flex items-start">
        <span class="text-cyan-400">‚îå‚îÄ‚îÄ(</span><span class="text-red-400">root</span><span class="text-gray-500">„âø</span><span class="text-yellow-400">kali</span><span class="text-cyan-400">)-[</span><span class="text-blue-400">~</span><span class="text-cyan-400">]</span>
        <br>
        <span class="text-cyan-400">‚îî‚îÄ$</span> <span id="live-command" class="inline-block"></span><span class="animate-pulse">_</span>
      </div>

      <!-- Output Area -->
      <div id="output" class="mt-4 text-gray-300"></div>
    </div>
  </div>

  <!-- Command Buttons -->
  <div class="flex justify-center gap-4 mt-6 flex-wrap">
    <button onclick="runCommand('nmap -sV 192.168.56.101')" class="px-5 py-2 bg-gradient-to-r from-cyan-600 to-blue-600 text-white font-mono text-xs rounded-lg hover:shadow-lg transition flex items-center gap-2">
      <i class="fas fa-search"></i> Scan Target
    </button>
    <button onclick="runCommand('msfconsole')" class="px-5 py-2 bg-gradient-to-r from-red-600 to-orange-600 text-white font-mono text-xs rounded-lg hover:shadow-lg transition flex items-center gap-2">
      <i class="fas fa-bomb"></i> Launch Metasploit
    </button>
    <button onclick="runCommand('burpsuite')" class="px-5 py-2 bg-gradient-to-r from-purple-600 to-pink-600 text-white font-mono text-xs rounded-lg hover:shadow-lg transition flex items-center gap-2">
      <i class="fas fa-bug"></i> Start Burp Suite
    </button>
  </div>
</div>
      {% endfor %}
    </div>
  </div>
</section>

<script>
// Wizard Logic
let currentStep = 1;
let setupData = {};

function startWizard() {
  currentStep = 1;
  document.getElementById('wizard-steps').classList.remove('hidden');
  showStep(1);
}

function showStep(step) {
  // Hide all steps
  document.querySelectorAll('.step').forEach(s => s.classList.add('hidden'));
  document.getElementById(`step-${step}`).classList.remove('hidden');
}

function chooseOS(os) {
  setupData.os = os;
  currentStep = 2;
  showStep(2);
}

function chooseInstall(method) {
  setupData.installMethod = method;
  currentStep = 3;
  showStep(3);
}

function chooseVM(vm) {
  setupData.vm = vm;
  currentStep = 4;
  showStep(4);
}

function configureNetwork(network) {
  setupData.network = network;
  currentStep = 5;
  showStep(5);
}

function runCommand(tool) {
  // Simulate command execution
  const button = event.target;
  button.innerHTML = '<i class="fas fa-spinner fa-spin mr-1"></i>Installing...';
  button.disabled = true;
  
  setTimeout(() => {
    button.innerHTML = '<i class="fas fa-check mr-1"></i>Installed!';
    button.classList.add('bg-green-600', 'text-white');
  }, 2000);
}

function completeSetup() {
  currentStep = 7;
  showStep(7);
}

function copyCommand(command) {
  navigator.clipboard.writeText(command).then(() => {
    const button = event.target;
    const original = button.innerHTML;
    button.innerHTML = '<i class="fas fa-check mr-1"></i>Copied!';
    setTimeout(() => button.innerHTML = original, 1500);
  });
}

// Initialize
document.addEventListener('DOMContentLoaded', function() {
  // Smooth scroll for anchor links
  document.querySelectorAll('a[href^="#"]').forEach(anchor => {
    anchor.addEventListener('click', function (e) {
      e.preventDefault();
      const target = document.querySelector(this.getAttribute('href'));
      if (target) {
        target.scrollIntoView({
          behavior: 'smooth',
          block: 'start'
        });
      }
    });
  });
});
</script>

{% endblock %}