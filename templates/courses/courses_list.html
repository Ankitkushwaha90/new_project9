{% extends 'base.html' %}
{% load static %}

{% block title %}Courses - ProHacker Academy{% endblock %}

{% block content %}
<div class="min-h-screen bg-gray-50 dark:bg-gray-900 py-12 lg:py-12">


  
<div class="min-h-screen bg-gray-50 dark:bg-gray-900 py-6 lg:py-0">
  <!-- Hero + Live Search -->
   <!-- Matrix Rain -->
  <canvas id="matrix" class="fixed inset-0 opacity-20"></canvas>
  <div class="scanline"></div>
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center">
    <!-- Small-to-Medium Heading (Beautifully Balanced) -->
    <h1 class="text-3xl sm:text-4xl lg:text-5xl font-bold tracking-tight">
      <span class="bg-gradient-to-r from-indigo-600 via-purple-600 to-cyan-500 
                     dark:from-indigo-400 dark:via-purple-400 dark:to-cyan-300 
                     bg-clip-text text-transparent">
        Elite Courses
      </span>
    </h1>

    <!-- Clean & Compact Subtitle (Perfect Readability) -->
    <p class="mt-4 text-base sm:text-lg lg:text-xl text-gray-600 dark:text-gray-300 font-medium max-w-3xl mx-auto leading-relaxed">
      Hands-on <span class="text-indigo-600 dark:text-cyan-400 font-semibold">ethical hacking</span>, 
      red team tactics, AI security & advanced exploitation.
    </p>

    <!-- Optional Tiny Tagline (Super Minimal) -->
    <p class="mt-3 text-xs sm:text-sm text-gray-500 dark:text-gray-500 uppercase tracking-widest font-medium">
      Train like the pros • Exploit like the elite
    </p>
  </div>


  <!-- LIVE SEARCH BAR – THIS ONE WORKS FOREVER -->
<div class="mt-5 max-w-3xl mx-auto">
  <div class="relative">
    <i class="fas fa-search absolute left-6 top-1/2 -translate-y-1/2 
          text-gray-400 dark:text-gray-500 
          text-lg                 
          pointer-events-none z-10">
</i>

<input 
          type="text"
          name="q"
          value="{{ search_query|default:'' }}"
          placeholder="Search instantly by title or description..."
          autocomplete="off"
          hx-get="{% url 'courses:courses_list' %}"
          hx-trigger="keyup changed delay:300ms"
          hx-target="#course-grid"
          hx-indicator="#search-spinner"
          class="w-full px-6 py-5 pl-16 pr-12 text-lg rounded-2xl border border-gray-300 dark:border-gray-600 
                 bg-white dark:bg-gray-800/90 shadow-inner focus:outline-none focus:ring-4 
                 focus:ring-cyan-500/30 dark:focus:ring-cyan-400/30 transition placeholder-gray-500"
        >


    <!-- Spinner -->
    <div id="spinner" class="htmx-indicator absolute right-12 top-1/2 -translate-y-1/2">
      <i class="fas fa-spinner fa-spin text-cyan-500 text-xl"></i>
    </div>

    <!-- Clear button (full reload to empty state) -->
    <a href="{% url 'courses:courses_list' %}" 
       class="absolute right-5 top-1/2 -translate-y-1/2 text-gray-400 hover:text-red-500 text-xl">
      ×
    </a>
  </div>

  <!-- Results text -->
  <div class="mt-4 text-sm text-gray-600 dark:text-gray-400 text-center">
    {{ courses|length }} elite course{{ courses|length|pluralize }} available
  </div>
</div>

  <!-- Live Grid -->
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
    <div id="course-grid">
      {% include 'courses/_course_grid.html' %}
    </div>
  </div>
</div>






  <!-- Final CTA -->
  <div class="mt-24 bg-gradient-to-t from-indigo-50/50 to-transparent dark:from-indigo-950/20 py-20">
    <div class="text-center">
      <h2 class="text-4xl font-bold text-gray-900 dark:text-white mb-4">Ready to Go Elite?</h2>
      <p class="text-xl text-gray-600 dark:text-gray-300 mb-10">Join the next generation of red teamers.</p>
      <a href="#" class="inline-flex items-center px-10 py-5 bg-gradient-to-r from-indigo-600 to-cyan-600 
                         hover:from-indigo-700 hover:to-cyan-700 text-white font-bold text-lg rounded-2xl 
                         shadow-2xl hover:shadow-cyan-500/50 transition transform hover:scale-105">
        Explore All Courses <i class="fas fa-arrow-right ml-4"></i>
      </a>
    </div>
  </div>
</div>
{% endblock %}

{% block extra_css %}
<style>
  .line-clamp-3 { 
    display: -webkit-box; 
    -webkit-line-clamp: 3; 
    -webkit-box-orient: vertical; 
    overflow: hidden; 
  }
</style>

<!-- MATRIX RAIN – Only in Dark Mode -->
<script>
  if (document.documentElement.classList.contains('dark')) {
    const canvas = document.getElementById('matrix');
    const ctx = canvas.getContext('2d');
    canvas.width = window.innerWidth;
    canvas.height = window.innerHeight;

    const matrix = "01アイウエオカキクケコサシスセソタチツテトナニヌネノハヒフヘホ";
    const fontSize = 16;
    const columns = canvas.width / fontSize;
    const drops = Array(Math.floor(columns)).fill(1);

    function draw() {
      ctx.fillStyle = 'rgba(0,0,0,0.05)';
      ctx.fillRect(0, 0, canvas.width, canvas.height);
      ctx.fillStyle = '#0f0';
      ctx.font = fontSize + 'px monospace';

      for (let i = 0; i < drops.length; i++) {
        const text = matrix[Math.floor(Math.random() * matrix.length)];
        ctx.fillText(text, i * fontSize, drops[i] * fontSize);
        if (drops[i] * fontSize > canvas.height && Math.random() > 0.975) drops[i] = 0;
        drops[i]++;
      }
    }
    setInterval(draw, 35);
  }
</script>
{% endblock %}